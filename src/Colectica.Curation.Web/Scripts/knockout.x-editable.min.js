!function(a){"function"==typeof define&&define.amd?define(["knockout","jquery"],a):a(window.ko,window.jQuery)}(function(a,b){a.bindingHandlers.editable={init:function(c,d,e,f,g){function l(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}var h=b(c),i=d(),j=e(),k=j.editableOptions||{};k.value=a.utils.unwrapObservable(i),k.name||b.each(g.$data,function(a,b){return b==i?(k.name=a,!1):void 0}),!k.validate&&i.isValid&&(k.validate=function(b){var c=i();i(b);var d=i.isValid()?null:a.utils.unwrapObservable(i.error);return i(c),d}),"select"!==k.type&&"checklist"!==k.type&&"typeahead"!==k.type||k.source||!k.options||(k.optionsCaption&&(k.prepend=k.optionsCaption),k.source=function(){return a.utils.arrayMap(k.options(),function(b){var c=l(b,k.optionsValue,b),d=l(b,k.optionsText,d);return{value:a.utils.unwrapObservable(c),text:a.utils.unwrapObservable(d)}})}),k.visible&&a.isObservable(k.visible)&&(k.toggle="manual");var m=h.editable(k);a.isObservable(i)&&m.on("save.ko",function(a,b){i(b.newValue)}),k.save&&m.on("save",k.save),a.computed({read:function(){var b=a.utils.unwrapObservable(d());null===b&&(b=""),m.editable("setValue",b,!0)},owner:this,disposeWhenNodeIsRemoved:c}),k.visible&&a.isObservable(k.visible)&&(a.computed({read:function(){var b=a.utils.unwrapObservable(k.visible());b&&m.editable("show")},owner:this,disposeWhenNodeIsRemoved:c}),m.on("hidden.ko",function(){k.visible(!1)}))}}});